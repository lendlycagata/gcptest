(this["webpackJsonpengagement-app"]=this["webpackJsonpengagement-app"]||[]).push([[0],{104:function(e,t,a){},106:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(27),c=a.n(r),o=(a(76),a(8)),s=(a(77),a(78),a(66)),m=a.n(s),i=a(5),u=a(13),d=a(6),E=a(10),p=a.n(E),v=(a(96),"http://localhost:4000/api/"),h=a(19),f={currentUser:localStorage.getItem("currentUser"),get currentUserValue(){return localStorage.getItem("currentUser")}};function g(){localStorage.removeItem("currentUser")}var b=Object(h.g)((function(e){f.currentUserValue&&(e.history.push("/home"),window.location.reload(!0)),"admin"===f.currentUser&&(e.history.push("/admin"),window.location.reload(!0));var t=Object(n.useState)({email:"",password:"",successMessage:null}),a=Object(o.a)(t,2),r=a[0],c=a[1],s=function(e){var t=e.target,a=t.id,n=t.value;c((function(e){return Object(d.a)({},e,Object(u.a)({},a,n))}))};return l.a.createElement("div",{className:"col-xs-6 col-sm-8 col-lg-6 login-card mt-2 hv-center login",style:{backgroundImage:"url(".concat("../meerkat.jpg",")")}},l.a.createElement("form",null,l.a.createElement("div",{className:"form-group text-left"},l.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email address"),l.a.createElement("input",{type:"email",className:"form-control",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",value:r.email,onChange:s}),l.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),l.a.createElement("div",{className:"form-group text-left"},l.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),l.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",value:r.password,onChange:s})),l.a.createElement("div",{className:"form-check"}),l.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(t){t.preventDefault();var a={headers:{"Content-Type":"application/json"},email:r.email,password:r.password};p.a.post(v+"login",a).then((function(t){if(200===t.status){c((function(e){return Object(d.a)({},e,{successMessage:"Login successful. Redirecting to home page.."})}));t.data.token;var n=a.email;e.showError(null),window.location.reload(!0),localStorage.setItem("currentUser",n)}else"admin"===a.email&&"admin"===a.password?(e.showError(null),window.location.reload(!0),localStorage.setItem("currentUser",a.email)):204===t.status?(console.log(t),e.showError("Username and password do not match")):(console.log(t.status),e.showError("Username does not exist"))})).catch((function(e){console.log(e)}))}},"LOG IN")),l.a.createElement("div",{className:"alert alert-success mt-2",style:{display:r.successMessage?"flex":"none"},role:"alert"},r.successMessage),l.a.createElement("div",{className:"registerMessage"},l.a.createElement("span",null,"Don't have an account? "),l.a.createElement("span",{className:"loginText",onClick:function(){return e.history.push("/register"),void e.updateTitle("Register")}},"Register")))})),N=a(34);var w=function(){var e=f.currentUserValue,t=e;return l.a.createElement("div",{className:"container"},l.a.createElement("nav",{className:"navbar"},l.a.createElement("div",{className:"telus-header text-light"},l.a.createElement("div",{className:"telus-image text-light"},l.a.createElement(i.b,{to:"/home"},l.a.createElement("img",{alt:"",src:"../TIDS.png",width:"205px",height:"45px"})))),t?l.a.createElement("div",{className:"telus-user text-light"},l.a.createElement("div",{className:"telus-user-icon"},l.a.createElement(N.a,null,l.a.createElement(N.a.Toggle,{id:"dropdown-basic",variant:"secondary"},l.a.createElement(m.a,null),"\xa0",e,"\xa0"),l.a.createElement(N.a.Menu,null,l.a.createElement(N.a.Item,{onClick:g,href:"/login"},"Log out"))))):null))};a(104);var y=Object(h.g)((function(e){f.currentUserValue&&(e.history.push("/home"),window.location.reload(!0));var t=Object(n.useState)({email:"",password:"",confirmPassword:"",successMessage:null}),a=Object(o.a)(t,2),r=a[0],c=a[1],s=function(e){var t=e.target,a=t.id,n=t.value;c((function(e){return Object(d.a)({},e,Object(u.a)({},a,n))}))};return l.a.createElement("div",{className:"col-xs-6 col-sm-8 col-lg-6 mt-2 hv-center registration ",style:{backgroundImage:"url(".concat("../cheetah.jpg",")")}},l.a.createElement("form",null,l.a.createElement("div",{className:"form-group text-left"},l.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email address"),l.a.createElement("input",{type:"email",className:"form-control",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",value:r.email,onChange:s,required:!0}),l.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),l.a.createElement("div",{className:"form-group text-left"},l.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),l.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",value:r.password,onChange:s,required:!0})),l.a.createElement("div",{className:"form-group text-left"},l.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Confirm Password"),l.a.createElement("input",{type:"password",className:"form-control",id:"confirmPassword",placeholder:"Confirm Password",value:r.confirmPassword,onChange:s,required:!0})),l.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(t){t.preventDefault(),r.password===r.confirmPassword?function(){if(r.email.length&&r.password.length){e.showError(null);var t={email:r.email,password:r.password};p.a.post(v+"register",t).then((function(a){200===a.data.code?(c((function(e){return Object(d.a)({},e,{successMessage:"Registration successful. Redirecting to home page.."})})),e.showError(null),localStorage.setItem("currentUser",t.email),window.location.reload(!0)):e.showError("Username already exists")})).catch((function(e){console.log(e)}))}else e.showError("Please enter valid username and password")}():e.showError("Passwords do not match")}},"Register")),l.a.createElement("div",{className:"alert alert-success mt-2",style:{display:r.successMessage?"flex":"none"},role:"alert"},r.successMessage),l.a.createElement("div",{className:"mt-2"},l.a.createElement("span",null,"Already have an account? "),l.a.createElement("span",{className:"loginText",onClick:function(){return e.updateTitle("Login"),void e.history.push("/login")}},"Login here")))})),j=a(28),O=a(29),x=a(17),D=a(31),k=a(30),S=a(33),C=a.n(S),I=(a(106),function(e){Object(D.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={events:[],now:C()()},n.setState=n.setState.bind(Object(x.a)(n)),n}return Object(O.a)(a,[{key:"componentDidMount",value:function(){var e=this;p.a.get(v+"get").then((function(t){var a=t.data;e.setState({events:a})})).catch((function(e){return console.log("Error "+e)}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"col-xs-6 col-sm-8 col-lg-6 hv-center home",style:{backgroundImage:"url(".concat("../turtles.jpg",")")}},l.a.createElement("div",{className:"title"},"Events"),l.a.createElement("div",{className:"calendar"},this.state.events.filter((function(t){return e.state.now.isBefore(t.eventDate)})).sort((function(e,t){return new Date(e.eventDate.split("/"))-new Date(t.eventDate.split("/"))})).map((function(e){return l.a.createElement("div",{className:"calendar-row"},l.a.createElement("div",{className:"date font-weight-bold"},C()(e.eventDate).startOf("day").fromNow()),l.a.createElement("div",{className:"details font-weight-bold"},l.a.createElement(i.b,{to:"/events/"+e.eventID,className:"Link"},e.eventName)))}))),l.a.createElement("div",{className:"push"}))}}]),a}(n.Component)),T=Object(h.g)(I),U=a(37),M=a.n(U),P=a(45),V=a.n(P);a(135);var q=Object(h.g)((function(e){var t=Object(n.useState)({Name:"",Date:new Date,Venue:"",Detail:"",Stars:"",Code:"",StartTime:"",EndTime:""}),a=Object(o.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(""),m=Object(o.a)(s,2),i=m[0],E=m[1],v=function(e){var t=e.target,a=t.id,n=t.value;c((function(e){return Object(d.a)({},e,Object(u.a)({},a,n))}))};return l.a.createElement("div",{className:"col-xs-6 col-sm-8 col-lg-6 hv-center mt-2 admin"},l.a.createElement("form",null,l.a.createElement("div",{className:"form-group text-left admin-content"},l.a.createElement("label",null,"Event Name"),l.a.createElement("input",{type:"text",className:"form-control",id:"Name",placeholder:"Enter event name",value:r.Name,onChange:v,required:!0})),l.a.createElement("div",{className:"form-group text-left"},l.a.createElement("label",null,"Event Date"),l.a.createElement("br",null),l.a.createElement(M.a,{onChange:function(e){c((function(t){return Object(d.a)({},t,{Date:e})}))},value:r.Date,minDate:new Date,required:!0,dateFormat:"yyyy/MM/dd"})),l.a.createElement("div",{className:"form-group text-left"},l.a.createElement("label",null,"Event Venue"),l.a.createElement("input",{type:"text",className:"form-control",id:"Venue",placeholder:"Enter event venue",value:r.Venue,onChange:v,required:!0})),l.a.createElement("div",{className:"form-group text-left"},l.a.createElement("label",null,"Event Details"),l.a.createElement("input",{type:"text",className:"form-control",id:"Detail",placeholder:"Enter event details",value:r.Detail,onChange:v,required:!0})),l.a.createElement("div",{className:"form-group text-left"},l.a.createElement("label",null,"Event Photo"),l.a.createElement("input",{type:"file",className:"form-control",id:"Photo",onChange:function(e){E(e.target.files[0])}})),l.a.createElement("div",{className:"form-group text-left"},l.a.createElement("label",null,"Event Stars"),l.a.createElement("input",{type:"text",className:"form-control",id:"Stars",placeholder:"How many stars is this event worth?",value:r.Stars,onChange:v,required:!0})),l.a.createElement("div",{className:"form-group text-left"},l.a.createElement("label",null,"Event Code"),l.a.createElement("input",{type:"text",className:"form-control",id:"Code",placeholder:"Enter event code",value:r.Code,onChange:v,required:!0})),l.a.createElement("div",{className:"form-group text-left"},l.a.createElement("label",null,"From"),l.a.createElement("br",null),l.a.createElement(V.a,{onChange:function(e){c((function(t){return Object(d.a)({},t,{StartTime:e})}))},value:r.StartTime,required:!0,disableClock:!0})),l.a.createElement("div",{className:"form-group text-left"},l.a.createElement("label",null,"To"),l.a.createElement("br",null),l.a.createElement(V.a,{onChange:function(e){c((function(t){return Object(d.a)({},t,{EndTime:e})}))},value:r.EndTime,required:!0,disableClock:!0})),l.a.createElement("div",{className:"form-check"}),l.a.createElement("button",{type:"submit",className:"btn btn-primary btn-clock",onClick:function(e){e.preventDefault();var t=new Date(r.Date).toISOString(),a=new FormData;a.append("eventName",r.Name),a.append("eventDate",t),a.append("eventVenue",r.Venue),a.append("eventDetail",r.Detail),a.append("eventStars",r.Stars),a.append("eventPhoto",i),a.append("eventCode",r.Code),a.append("eventStart",r.StartTime),a.append("eventEnd",r.EndTime),a?(p.a.post("http://localhost:4000/admin/adminpost",a).then((function(e){200===e.data.code&&c((function(e){return Object(d.a)({},e)}))})).catch((function(e){console.log("Error"+e)})),alert("Event posted!")):e.preventDefault()}},"Submit")),l.a.createElement("div",{className:"push"}))})),F=(a(136),function(e){Object(D.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={user:""},n.setState=n.setState.bind(Object(x.a)(n)),n}return Object(O.a)(a,[{key:"componentDidMount",value:function(){var e=f.currentUserValue;this.setState({user:e})}},{key:"render",value:function(){return l.a.createElement("div",{className:"stars col-xs-6 col-sm-8 col-lg-6 mt-2 hv-center",style:{backgroundImage:"url(".concat("../tang.jpg",")")}},l.a.createElement("div",{className:"title"},"Stars"),l.a.createElement("div",{className:"testUser"},l.a.createElement("h4",null,this.state.user)),l.a.createElement("hr",{className:"hr"}),l.a.createElement("h3",null,"Total Stars: 0"))}}]),a}(n.Component)),B=Object(h.g)(F),L=(a(137),a(47)),R=a.n(L),H=a(46),A=a.n(H),W=a(69),Y=a.n(W),G=a(68),J=a.n(G),$=a(67),z=a.n($);var K=function(e){var t="admin"===f.currentUserValue;return l.a.createElement("footer",{className:"parent "},t?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"column-home"},l.a.createElement("i",{className:"home-icon"},l.a.createElement(A.a,null)),l.a.createElement(i.b,{to:"/myevents",className:"home-text"},"Tasks")),l.a.createElement("div",{className:"column-home"},l.a.createElement("i",{className:"home-icon"},l.a.createElement(z.a,null)),l.a.createElement(i.b,{to:"/tasks",className:"home-text"},"Add Tasks")),l.a.createElement("div",{className:"column-home"},l.a.createElement("i",{className:"home-icon"},l.a.createElement(R.a,null)),l.a.createElement(i.b,{to:"/home",className:"home-text"},"Events")),l.a.createElement("div",{className:"column-home"},l.a.createElement("i",{className:"home-icon"},l.a.createElement(J.a,null)),l.a.createElement(i.b,{to:"/admin",className:"home-text"},"Post Event"))):l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"column-home"},l.a.createElement("i",{className:"home-icon"},l.a.createElement(A.a,null)),l.a.createElement(i.b,{to:"/myevents",className:"home-text"},"Tasks")),l.a.createElement("div",{className:"column-home"},l.a.createElement("i",{className:"home-icon"},l.a.createElement(R.a,null)),l.a.createElement(i.b,{to:"/home",className:"home-text"},"Events")),l.a.createElement("div",{className:"column-home"},l.a.createElement("i",{className:"home-icon"},l.a.createElement(Y.a,null)),l.a.createElement(i.b,{to:"/stars",className:"home-text"},"Stars"))))},Q=f.currentUserValue,X=function(e){Object(D.a)(a,e);var t=Object(k.a)(a);function a(e){var n;Object(j.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.id,l=t.value;n.setState((function(e){return Object(d.a)({},e,Object(u.a)({},a,l))}))},n.authenticateCode=function(e){console.log("currentUser",n.state)},n.state={events:[],loggedUser:[]},n.setState=n.setState.bind(Object(x.a)(n)),n.goBack=n.goBack.bind(Object(x.a)(n));return n}return Object(O.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={eventID:this.props.match.params.eventID};p.a.post(v+"events/"+t.eventID,t).then((function(t){var a=t.data;e.setState({events:a})})).catch((function(e){return console.log("Error "+e)})),p.a.post("http://localhost:4000/task/getUser",Q).then((function(t){console.log(Q);var a=t.data;console.log(t),e.setState(a)}))}},{key:"goBack",value:function(){this.props.history.goBack()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"col-12 col-lg-4 mt-2 hv-center myevents"},this.state.events.map((function(t){return l.a.createElement("div",null,l.a.createElement("img",{alt:"Event Venue",src:"../"+t.eventPhoto,width:"100%",height:"100%"}),l.a.createElement("p",null,"Event Name: "),l.a.createElement("h4",null,t.eventName),l.a.createElement("br",null),l.a.createElement("p",null,"Event Date: \xa0",C()(t.eventDate).format("MMM Do YYYY")),l.a.createElement("p",null,"Event Venue: \xa0",t.eventVenue),l.a.createElement("p",null,"Details: \xa0",t.eventDetail),l.a.createElement("p",null,"Stars: \xa0",t.eventStars),l.a.createElement("p",null,"Start time: \xa0",t.eventStart,l.a.createElement("br",null),"End time: \xa0",t.eventEnd,l.a.createElement("br",null)),l.a.createElement("div",{className:"form-group row"},l.a.createElement("div",{className:"col-xs-2"},l.a.createElement("p",null,l.a.createElement("br",null),"Attended the event?",l.a.createElement("br",null),l.a.createElement("label",null,"Verify your attendance: "),l.a.createElement("input",{type:"text",className:"form-control",id:"eventCode",placeholder:"Enter event code",value:e.state.eventCode,onChange:e.handleChange,required:!0}),l.a.createElement("button",{className:"button icon-left",onClick:e.authenticateCode},"Verify")))),l.a.createElement("button",{className:"button icon-left",onClick:e.goBack},"Go back"))})),l.a.createElement("div",{className:"push"}))}}]),a}(n.Component),Z=Object(h.g)(X);a(138);var _=Object(h.g)((function(e){var t=Object(n.useState)({Name:"",DateDue:new Date,userID:""}),a=Object(o.a)(t,2),r=a[0],c=a[1],s=function(e){var t=e.target,a=t.id,n=t.value;c((function(e){return Object(d.a)({},e,Object(u.a)({},a,n))}))};return l.a.createElement("div",{className:"col-xs-6 col-sm-8 col-lg-6 hv-center mt-2 task"},l.a.createElement("form",null,l.a.createElement("div",{className:"form-group text-left admin-content"},l.a.createElement("label",null,"Task Name"),l.a.createElement("input",{type:"text",className:"form-control",id:"Name",placeholder:"Enter task name",value:r.Name,onChange:s,required:!0})),l.a.createElement("div",{className:"form-group text-left"},l.a.createElement("label",null,"Task Due"),l.a.createElement("br",null),l.a.createElement(M.a,{onChange:function(e){c((function(t){return Object(d.a)({},t,{DateDue:e})}))},value:r.DateDue,minDate:new Date,required:!0,dateFormat:"dd/MM/yyyy"})),l.a.createElement("div",{className:"form-group text-left admin-content"},l.a.createElement("label",null,"For?"),l.a.createElement("input",{type:"text",className:"form-control",id:"userID",placeholder:"Enter email",value:r.userID,onChange:s,required:!0})),l.a.createElement("button",{type:"submit",className:"btn btn-primary btn-clock",onClick:function(e){var t={taskName:r.Name,dateDue:r.DateDue,userID:r.userID};t?(p.a.post("http://localhost:4000/task/post",t).then((function(e){200===e.data.code&&(console.log(r),c((function(e){return Object(d.a)({},e)})))})).catch((function(e){console.log("Error"+e)})),alert("Task posted!")):e.preventDefault()}},"Submit")),l.a.createElement("div",{className:"push"}))}));a(139);var ee=function(e){var t=Object(n.useState)("none"),a=Object(o.a)(t,2),r=a[0],c=a[1],s=function(){c("none"),e.hideError(null)};return Object(n.useEffect)((function(){null!==e.errorMessage?c("block"):s()})),l.a.createElement("div",{className:"alert alert-danger alert-dismissable mt-4",role:"alert",id:"alertPopUp",style:{display:r}},l.a.createElement("span",null,e.errorMessage),l.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:function(){return s()}},l.a.createElement("span",{"aria-hidden":"true"},"\xd7")))},te=a(38),ae=function(e){var t=e.component,a=Object(te.a)(e,["component"]);return l.a.createElement(h.b,Object.assign({},a,{render:function(e){return f.currentUserValue?l.a.createElement(t,e):l.a.createElement(h.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},ne=function(e){var t=e.component,a=Object(te.a)(e,["component"]);return l.a.createElement(h.b,Object.assign({},a,{render:function(e){var a=f.currentUserValue;return a?"admin"!==a?l.a.createElement(h.a,{to:{pathname:"/home",state:{from:e.location}}}):l.a.createElement(t,e):l.a.createElement(h.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};var le=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),s=Object(o.a)(c,2),m=s[0],u=s[1],d=localStorage.getItem("currentUser");return l.a.createElement(i.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(w,{title:a}),l.a.createElement("div",{className:"container d-flex justify-content-center"},l.a.createElement(h.d,null,l.a.createElement(h.b,{path:"/",exact:!0},l.a.createElement(b,{showError:u,updateTitle:r})),l.a.createElement(h.b,{path:"/register"},l.a.createElement(y,{showError:u,updateTitle:r})),l.a.createElement(h.b,{path:"/login"},l.a.createElement(b,{showError:u,updateTitle:r})),l.a.createElement(ae,{path:"/home",refresh:"true",component:T}),l.a.createElement(ne,{path:"/admin",component:q}),l.a.createElement(ne,{path:"/tasks",component:_}),l.a.createElement(ae,{path:"/stars",component:B}),l.a.createElement(ae,{path:"/events/:eventID",exact:!0,component:Z})),l.a.createElement(ee,{errorMessage:m,hideError:u})),d?l.a.createElement(K,null):null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},71:function(e,t,a){e.exports=a(142)},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},96:function(e,t,a){}},[[71,1,2]]]);
//# sourceMappingURL=main.321a0148.chunk.js.map